# 软件工程 3.0：全生命周期原子活动与 AI 协同矩阵

**软件工程 3.0 (Agentic SE)** 标志着从“人驱动工具”向“人机协同伴生”的范式转变。在这一阶段，AI Agent 不再仅仅是辅助编码的 Copilot，而是具备感知、推理、决策与执行能力的“数字员工”。本矩阵定义了 SE 3.0 体系下，全生命周期（SDLC）关键原子活动的智能化形态。

## 1. 需求工程 (Intent & Requirements)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)                        | AI Agent 协同机制 (Agent Mechanism)                                                                              |
| :------------------------- | :----------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------- |
| **意图捕获与澄清**         | 识别模糊业务描述中的隐性约束与非功能性需求。           | [**Interviewer Agent**](specs/agent_interviewer.md)：采用多角色扮演（Persona）策略，通过反问与引导补全业务边界。 |
| **冲突与一致性审计**       | 检测跨项目、跨文档的业务规则逻辑矛盾与术语歧义。       | **Consistency RAG**：基于语义向量检索，自动识别新旧需求间的逻辑冲突。                                            |
| **原子用户故事拆解**       | 将宏大史诗 (Epic) 分解为符合 INVEST 原则的可交付单元。 | **Planning Agent**：基于历史交付数据与复杂度模型，启发式生成任务拆解树。                                         |
| **验收准则 (AC) 自动化**   | 生成可执行的 BDD/Gherkin 格式测试用例描述。            | **Specification Agent**：将自然语言需求精准转化为 Given-When-Then 逻辑断言。                                     |

## 2. 系统架构与设计 (Design & Architecture)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)                       | AI Agent 协同机制 (Agent Mechanism)                                                                 |
| :------------------------- | :---------------------------------------------------- | :-------------------------------------------------------------------------------------------------- |
| **架构决策推理 (ADR)**     | 针对多方案进行 Trade-off 分析（如一致性 vs 可用性）。 | [**Architect CoT**](specs/agent_architect.md)：检索架构模式库，生成基于场景的决策树与利弊分析报告。 |
| **领域模型 (DDD) 构建**    | 识别聚合根、实体、值对象及限界上下文边界。            | **Domain Modeler**：通过代码/需求双向映射，自动提炼与可视化领域模型。                               |
| **API 契约定义**           | 定义标准化接口规范（OpenAPI/IDL）及兼容性策略。       | **Protocol Steward**：自动生成符合企业标准的接口契约，并校验向后兼容性。                            |
| **数据架构演进**           | 设计符合范式的 Schema、索引策略及数据脱敏规则。       | **DBA Copilot**：结合查询模式预测，自动推荐 DDL 变更与索引优化方案。                                |

## 3. 开发实施 (Implementation)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)                      | AI Agent 协同机制 (Agent Mechanism)                                                                 |
| :------------------------- | :--------------------------------------------------- | :-------------------------------------------------------------------------------------------------- |
| **逻辑合成与代码填充**     | 基于全项目上下文，自动生成业务逻辑代码与胶水代码。   | **Repo-Aware Coder**：通过 MCP 协议感知工程全局依赖，实现“一次生成，多处引用”。                     |
| **遗留系统现代化**         | 将单体/旧技术栈（Label/COBOL）平滑迁移至微服务架构。 | **Modernization Agent**：基于 AST 的结构变换与语义保持转译，确保逻辑等价性。                        |
| **动态 Mock 编排**         | 为未就绪的依赖服务构建高保真仿真环境。               | **Simulator Agent**：解析契约协议，动态生成具备状态记忆的 Mock 服务。                               |
| **智能代码评审 (CR)**      | 审计代码异味、安全漏洞、甚至深层逻辑缺陷。           | [**Reviewer Agent**](specs/agent_reviewer.md)：融合静态分析与大模型语义理解，提供可执行的修复建议。 |

## 4. 测试与质量工程 (Quality Engineering)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)                | AI Agent 协同机制 (Agent Mechanism)                                    |
| :------------------------- | :--------------------------------------------- | :--------------------------------------------------------------------- |
| **全路径用例生成**         | 构造覆盖核心路径、异常分支及边界条件的测试集。 | **Coverage Agent**：基于控制流图分析，自动生成高覆盖率的测试数据组合。 |
| **UI 自动化脚本自愈**      | 应对前端 DOM 变更，自动修复失效的测试脚本。    | **Self-Healing Agent**：利用多模态视觉理解，动态重新定位 UI 元素。     |
| **生产流量回放**           | 录制生产流量并在预发环境回放，校验逻辑一致性。 | **Traffic Replayer**：智能数据脱敏与流量清洗，聚合异常差异点。         |
| **对抗性模糊测试**         | 模拟恶意攻击与异常输入，挖掘安全/稳定性边界。  | **Chaos Agent**：生成对抗性样本与故障注入，验证系统鲁棒性。            |

## 5. 安全与合规 (DevSecOps 3.0)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)                  | AI Agent 协同机制 (Agent Mechanism)                                            |
| :------------------------- | :----------------------------------------------- | :----------------------------------------------------------------------------- |
| **威胁建模自动化**         | 在设计阶段识别数据流图中的潜在攻击面。           | **Security Architect**：对标 STRIDE/MITRE ATT&CK 模型，自动标记高危链路。      |
| **漏洞自动修复 (APR)**     | 识别 CVE/SAST 漏洞并生成经过验证的修复补丁。     | **Vulnerability Fixer**：检索漏洞库与补丁知识库，自动提交修复 Pull Request。   |
| **合规性内生审计**         | 确保系统满足等保 2.0、GDPR、PCI-DSS 等准入标准。 | **Compliance Auditor**：将法律文本转化为 Policy-as-Code 规则，实时扫描违规项。 |

## 6. 发布、运维与观测 (SRE 3.0)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)            | AI Agent 协同机制 (Agent Mechanism)                                                                |
| :------------------------- | :----------------------------------------- | :------------------------------------------------------------------------------------------------- |
| **智能灰度发布**           | 实时监控发布指标，自主决策流量比例或回滚。 | **Release Guardian**：基于 DORA 指标与异常检测算法的无人值守发布引擎。                             |
| **根因诊断 (RCA)**         | 在海量告警中定位故障源头，分析传播链路。   | [**Sherlock Agent**](specs/agent_sherlock.md)：构建故障知识图谱，自动关联日志、Metric 与变更事件。 |
| **故障自愈执行**           | 执行标准化的恢复预案（重启、扩容、降级）。 | **Recovery Bot**：在授权范围内，自动调用运维工具链执行止损操作。                                   |

## 7. 效能治理与度量 (Governance)

| 原子活动 (Atomic Activity) | 核心任务描述 (Task Description)        | AI Agent 协同机制 (Agent Mechanism)                                        |
| :------------------------- | :------------------------------------- | :------------------------------------------------------------------------- |
| **DORA 指标自动核算**      | 无感采集并计算研发效能核心指标。       | **Metrics Collector**：聚合跨工具链（Git/Jira/CI）数据，实时生成效能看板。 |
| **智能周报合成**           | 从碎片化工作记录中提炼高价值工作摘要。 | **Reporter Agent**：语义压缩 Git Commit 与工单记录，生成结构化汇报材料。   |
| **项目风险预警**           | 预测交付延期、质量下滑等潜在风险。     | **Oracle Agent**：基于时间序列分析与情感分析，提前识别项目“亚健康”状态。   |

---

## 3.0 范式的底层基石 (Infrastructure)

为支撑上述原子活动的智能化，必须构建以下三大基础设施：

1. **MCP (Model Context Protocol)**：
    * **定义**：Agent 与企业数字环境（IDE, Git, Cloud, DB）的标准交互协议。
    * **价值**：赋予 Agent “手”和“眼”，使其能读取实时状态并执行物理操作。

2. **Repo-level Semantics (Code Graph)**：
    * **定义**：基于 AST 与语义向量构建的代码知识图谱。
    * **价值**：提供跨文件、跨仓库的深层语义理解，确保 AI 不会产生“幻觉”。

3. **Human-in-the-loop (HITL) Protocol**：
    * **定义**：关键决策节点的“人机握手”机制。
    * **价值**：在自动化与可控性之间取得平衡，对高风险操作（删除数据、资金交易）实施授权熔断。
